# Set up Jenkins on Minikube
## Create Namespace
```bash
kubectl create namespace jenkins
# verify with
kubectl get namespaces
`````````````

## Install Helm
```bash
curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
chmod 700 get_helm.sh
./get_helm.sh
```

## Add Jenkins Repo
```bash
helm repo add jenkinsci https://charts.jenkins.io
helm repo update
# search charts in repo
helm search repo jenkinsci
```

## Create and Configure Persistent Volume
Size is set to 20, I set to 15. I also made a directory to store the configs and anything related, `~/k8s/`
```bash
curl -o ~/k8s/jenkins-volume.yaml https://raw.githubusercontent.com/jenkins-infra/jenkins.io/master/content/doc/tutorials/kubernetes/installing-jenkins-on-kubernetes/jenkins-volume.yaml
# make configuration changes before proceeding
kubectl apply -f jenkins-volume.yaml
# ssh to minikube
minikube ssh
# I believe docs are missing the step to create the folder, added below
sudo mkdir /data/jenkins-volume
# correct folder permissions
sudo chown -R 1000:1000 /data/jenkins-volume
```
## Create a service account
Download the yaml template.
```bash
curl -o ~/k8s/jenkins-sa.yaml https://raw.githubusercontent.com/jenkins-infra/jenkins.io/master/content/doc/tutorials/kubernetes/installing-jenkins-on-kubernetes/jenkins-sa.yaml
k apply -f jenkins-sa.yaml
```
Create the account.
```bash
kubectl apply -f jenkins-sa.yaml
```
## Deploy Jenkins
```bash
# create override file
curl -o ~/k8s/jenkins-values.yaml https://raw.githubusercontent.com/jenkinsci/helm-charts/main/charts/jenkins/values.yaml
```
Edit the values file and set `nodePort: 32000`, `storageClass: jenkins-pv`, and the serviceAccount section to:
```yaml
serviceAccount:
create: false
# Service account name is autogenerated by default
name: jenkins
annotations: {}
```
chart=jenkinsci/jenkins \
helm install jenkins -n jenkins -f jenkins-values.yaml $chart
```
Verify the service is running. Default settings should show the service `jenkins` running on port 8080.
```bash
k get svc -n jenkins
```
## Apply  
## Configure Ingress
TODO: Left off at Get your 'admin' user password by running:


## Reference
https://www.jenkins.io/doc/book/installing/kubernetes/[1](https://www.jenkins.io/doc/book/installing/kubernetes/)
https://helm.sh/docs/intro/install/[2](https://helm.sh/docs/intro/install/)
